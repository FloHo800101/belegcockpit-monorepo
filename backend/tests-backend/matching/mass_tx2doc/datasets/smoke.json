{
  "meta": {
    "name": "variants_min",
    "schemaVersion": 1
  },
  "docs": [
    {
      "id": "d-ib",
      "tenant_id": "t_ib",
      "amount": 120.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-01-05T00:00:00.000Z",
      "iban": "DE11111111111111111111",
      "vendor_raw": "Alpha GmbH",
      "vendor_norm": "alpha gmbh",
      "text_raw": "Alpha GmbH Rechnung",
      "text_norm": "alpha gmbh rechnung"
    },
    {
      "id": "d-e2e",
      "tenant_id": "t_e2e",
      "amount": 240.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-02-01T00:00:00.000Z",
      "e2e_id": "E2E-2002",
      "vendor_raw": "Beta AG",
      "vendor_norm": "beta ag",
      "text_raw": "Beta AG Rechnung",
      "text_norm": "beta ag rechnung"
    },
    {
      "id": "d-inv",
      "tenant_id": "t_inv",
      "amount": 89.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-03-01T00:00:00.000Z",
      "invoice_no": "INV-3001",
      "vendor_raw": "Gamma GmbH",
      "vendor_norm": "gamma gmbh",
      "text_raw": "Gamma GmbH Rechnung INV-3001",
      "text_norm": "gamma gmbh rechnung inv 3001"
    },
    {
      "id": "d-adv",
      "tenant_id": "t_adv",
      "amount": 310.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-04-05T00:00:00.000Z",
      "vendor_raw": "Delta KG",
      "vendor_norm": "delta kg",
      "text_raw": "Delta KG Leistung",
      "text_norm": "delta kg leistung"
    },
    {
      "id": "d-soft",
      "tenant_id": "t_soft",
      "amount": 100.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-05-01T00:00:00.000Z",
      "vendor_raw": "Omega GmbH",
      "vendor_norm": "omega gmbh",
      "text_raw": "Omega GmbH Rechnung",
      "text_norm": "omega gmbh rechnung"
    },
    {
      "id": "d-date",
      "tenant_id": "t_date",
      "amount": 95.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-01-01T00:00:00.000Z",
      "vendor_raw": "Date Test",
      "vendor_norm": "date test",
      "text_raw": "Date Test Rechnung",
      "text_norm": "date test rechnung"
    },
    {
      "id": "d-cur",
      "tenant_id": "t_cur",
      "amount": 77.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-01-10T00:00:00.000Z",
      "vendor_raw": "Currency Test",
      "vendor_norm": "currency test",
      "text_raw": "Currency Test Rechnung",
      "text_norm": "currency test rechnung"
    },
    {
      "id": "d-part",
      "tenant_id": "t_part",
      "amount": 150.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-06-01T00:00:00.000Z",
      "vendor_raw": "Partial Test",
      "vendor_norm": "partial test",
      "text_raw": "Partial Test Rechnung",
      "text_norm": "partial test rechnung"
    },
    {
      "id": "d-1n",
      "tenant_id": "t_1n",
      "amount": 100.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-07-01T00:00:00.000Z",
      "vendor_raw": "Theta GmbH",
      "vendor_norm": "theta gmbh",
      "text_raw": "Theta GmbH Rechnung",
      "text_norm": "theta gmbh rechnung"
    },
    {
      "id": "d-amz-1",
      "tenant_id": "t_amz",
      "amount": 30.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-08-01T00:00:00.000Z",
      "vendor_raw": "Amazon",
      "vendor_norm": "amazon",
      "text_raw": "Amazon Rechnung 1",
      "text_norm": "amazon rechnung 1"
    },
    {
      "id": "d-amz-2",
      "tenant_id": "t_amz",
      "amount": 25.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-08-01T00:00:00.000Z",
      "vendor_raw": "Amazon",
      "vendor_norm": "amazon",
      "text_raw": "Amazon Rechnung 2",
      "text_norm": "amazon rechnung 2"
    },
    {
      "id": "d-amz-3",
      "tenant_id": "t_amz",
      "amount": 45.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-08-01T00:00:00.000Z",
      "vendor_raw": "Amazon",
      "vendor_norm": "amazon",
      "text_raw": "Amazon Rechnung 3",
      "text_norm": "amazon rechnung 3"
    },
    {
      "id": "d-amb-1",
      "tenant_id": "t_n1_amb",
      "amount": 40.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-09-01T00:00:00.000Z",
      "vendor_raw": "Amb Test",
      "vendor_norm": "amb test",
      "text_raw": "Amb Test Rechnung 1",
      "text_norm": "amb test rechnung 1"
    },
    {
      "id": "d-amb-2",
      "tenant_id": "t_n1_amb",
      "amount": 60.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-09-01T00:00:00.000Z",
      "vendor_raw": "Amb Test",
      "vendor_norm": "amb test",
      "text_raw": "Amb Test Rechnung 2",
      "text_norm": "amb test rechnung 2"
    },
    {
      "id": "d-amb-3",
      "tenant_id": "t_n1_amb",
      "amount": 50.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-09-01T00:00:00.000Z",
      "vendor_raw": "Amb Test",
      "vendor_norm": "amb test",
      "text_raw": "Amb Test Rechnung 3",
      "text_norm": "amb test rechnung 3"
    },
    {
      "id": "d-amb-4",
      "tenant_id": "t_n1_amb",
      "amount": 50.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-09-01T00:00:00.000Z",
      "vendor_raw": "Amb Test",
      "vendor_norm": "amb test",
      "text_raw": "Amb Test Rechnung 4",
      "text_norm": "amb test rechnung 4"
    },
    {
      "id": "d-conf",
      "tenant_id": "t_conflict",
      "amount": 55.0,
      "currency": "EUR",
      "link_state": "unlinked",
      "invoice_date": "2026-10-01T00:00:00.000Z",
      "invoice_no": "INV-9001",
      "vendor_raw": "Conflict Co",
      "vendor_norm": "conflict co",
      "text_raw": "Conflict Co Rechnung INV-9001",
      "text_norm": "conflict co rechnung inv 9001"
    }
  ],
  "txs": [
    {
      "id": "tx-ib",
      "tenant_id": "t_ib",
      "amount": 120.0,
      "direction": "out",
      "currency": "EUR",
      "booking_date": "2026-01-07T00:00:00.000Z",
      "link_state": "unlinked",
      "iban": "DE11111111111111111111",
      "vendor_raw": "Alpha GmbH",
      "vendor_norm": "alpha gmbh",
      "text_raw": "Payment Alpha",
      "text_norm": "payment alpha"
    },
    {
      "id": "tx-e2e",
      "tenant_id": "t_e2e",
      "amount": 240.0,
      "direction": "out",
      "currency": "EUR",
      "booking_date": "2026-02-02T00:00:00.000Z",
      "link_state": "unlinked",
      "e2e_id": "E2E-2002",
      "vendor_raw": "Beta AG",
      "vendor_norm": "beta ag",
      "text_raw": "Payment E2E-2002",
      "text_norm": "payment e2e 2002"
    },
    {
      "id": "tx-inv",
      "tenant_id": "t_inv",
      "amount": 89.0,
      "direction": "out",
      "currency": "EUR",
      "booking_date": "2026-03-02T00:00:00.000Z",
      "link_state": "unlinked",
      "ref": "INV-3001",
      "vendor_raw": "Gamma GmbH",
      "vendor_norm": "gamma gmbh",
      "text_raw": "Payment INV-3001",
      "text_norm": "payment inv 3001"
    },
    {
      "id": "tx-adv",
      "tenant_id": "t_adv",
      "amount": 310.0,
      "direction": "out",
      "currency": "EUR",
      "booking_date": "2026-04-06T00:00:00.000Z",
      "link_state": "unlinked",
      "vendor_raw": "Delta KG",
      "vendor_norm": "delta kg",
      "text_raw": "Payment Delta",
      "text_norm": "payment delta"
    },
    {
      "id": "tx-soft",
      "tenant_id": "t_soft",
      "amount": 100.0,
      "direction": "out",
      "currency": "EUR",
      "booking_date": "2026-05-02T00:00:00.000Z",
      "link_state": "unlinked",
      "vendor_raw": "Other GmbH",
      "vendor_norm": "other gmbh",
      "text_raw": "Payment Other",
      "text_norm": "payment other"
    },
    {
      "id": "tx-date",
      "tenant_id": "t_date",
      "amount": 95.0,
      "direction": "out",
      "currency": "EUR",
      "booking_date": "2026-03-15T00:00:00.000Z",
      "link_state": "unlinked",
      "vendor_raw": "Date Test",
      "vendor_norm": "date test",
      "text_raw": "Payment Date Test",
      "text_norm": "payment date test"
    },
    {
      "id": "tx-cur",
      "tenant_id": "t_cur",
      "amount": 77.0,
      "direction": "out",
      "currency": "USD",
      "booking_date": "2026-01-12T00:00:00.000Z",
      "link_state": "unlinked",
      "vendor_raw": "Currency Test",
      "vendor_norm": "currency test",
      "text_raw": "Payment Currency Test",
      "text_norm": "payment currency test"
    },
    {
      "id": "tx-part",
      "tenant_id": "t_part",
      "amount": 150.0,
      "direction": "out",
      "currency": "EUR",
      "booking_date": "2026-06-02T00:00:00.000Z",
      "link_state": "unlinked",
      "vendor_raw": "Other Vendor",
      "vendor_norm": "other vendor",
      "text_raw": "Teilzahlung",
      "text_norm": "teilzahlung"
    },
    {
      "id": "tx-1n-a",
      "tenant_id": "t_1n",
      "amount": 40.0,
      "direction": "out",
      "currency": "EUR",
      "booking_date": "2026-07-02T00:00:00.000Z",
      "link_state": "unlinked",
      "vendor_raw": "Theta GmbH",
      "vendor_norm": "theta gmbh",
      "text_raw": "Payment Theta A",
      "text_norm": "payment theta a"
    },
    {
      "id": "tx-1n-b",
      "tenant_id": "t_1n",
      "amount": 60.0,
      "direction": "out",
      "currency": "EUR",
      "booking_date": "2026-07-03T00:00:00.000Z",
      "link_state": "unlinked",
      "vendor_raw": "Theta GmbH",
      "vendor_norm": "theta gmbh",
      "text_raw": "Payment Theta B",
      "text_norm": "payment theta b"
    },
    {
      "id": "tx-amz",
      "tenant_id": "t_amz",
      "amount": 100.0,
      "direction": "out",
      "currency": "EUR",
      "booking_date": "2026-08-02T00:00:00.000Z",
      "link_state": "unlinked",
      "vendor_raw": "Amazon",
      "vendor_norm": "amazon",
      "text_raw": "Amazon payment",
      "text_norm": "amazon payment"
    },
    {
      "id": "tx-amb",
      "tenant_id": "t_n1_amb",
      "amount": 100.0,
      "direction": "out",
      "currency": "EUR",
      "booking_date": "2026-09-02T00:00:00.000Z",
      "link_state": "unlinked",
      "vendor_raw": "Amb Test",
      "vendor_norm": "amb test",
      "text_raw": "Amb payment",
      "text_norm": "amb payment"
    },
    {
      "id": "tx-conf-a",
      "tenant_id": "t_conflict",
      "amount": 55.0,
      "direction": "out",
      "currency": "EUR",
      "booking_date": "2026-10-02T00:00:00.000Z",
      "link_state": "unlinked",
      "ref": "INV-9001",
      "vendor_raw": "Conflict Co",
      "vendor_norm": "conflict co",
      "text_raw": "Payment INV-9001 A",
      "text_norm": "payment inv 9001 a"
    },
    {
      "id": "tx-conf-b",
      "tenant_id": "t_conflict",
      "amount": 55.0,
      "direction": "out",
      "currency": "EUR",
      "booking_date": "2026-10-03T00:00:00.000Z",
      "link_state": "unlinked",
      "ref": "INV-9001",
      "vendor_raw": "Conflict Co",
      "vendor_norm": "conflict co",
      "text_raw": "Payment INV-9001 B",
      "text_norm": "payment inv 9001 b"
    }
  ],
  "cases": [
    {
      "id": "V001",
      "description": "Hard IBAN",
      "expected_state": "FINAL_MATCH",
      "expected_relation_type": "one_to_one",
      "doc_ids": ["d-ib"],
      "tx_ids": ["tx-ib"],
      "must_reason_codes": ["HARD_IBAN_AMOUNT"]
    },
    {
      "id": "V002",
      "description": "Hard E2E",
      "expected_state": "FINAL_MATCH",
      "expected_relation_type": "one_to_one",
      "doc_ids": ["d-e2e"],
      "tx_ids": ["tx-e2e"],
      "must_reason_codes": ["HARD_E2E_AMOUNT"]
    },
    {
      "id": "V003",
      "description": "Hard invoice number",
      "expected_state": "FINAL_MATCH",
      "expected_relation_type": "one_to_one",
      "doc_ids": ["d-inv"],
      "tx_ids": ["tx-inv"],
      "must_reason_codes": ["HARD_INVOICE_NO"]
    },
    {
      "id": "V004",
      "description": "Hard amount+date+vendor",
      "expected_state": "FINAL_MATCH",
      "expected_relation_type": "one_to_one",
      "doc_ids": ["d-adv"],
      "tx_ids": ["tx-adv"],
      "must_reason_codes": ["HARD_AMOUNT_DATE_VENDOR"]
    },
    {
      "id": "V005",
      "description": "Soft suggestion amount+date only",
      "expected_state": "SUGGESTED_MATCH",
      "expected_relation_type": "one_to_one",
      "doc_ids": ["d-soft"],
      "tx_ids": ["tx-soft"],
      "must_reason_codes": ["SOFT_AMOUNT_DATE"]
    },
    {
      "id": "V006",
      "description": "Date outside window",
      "expected_state": "NO_MATCH",
      "expected_relation_type": "none",
      "doc_ids": ["d-date"],
      "tx_ids": ["tx-date"],
      "must_reason_codes": []
    },
    {
      "id": "V007",
      "description": "Currency mismatch",
      "expected_state": "NO_MATCH",
      "expected_relation_type": "none",
      "doc_ids": ["d-cur"],
      "tx_ids": ["tx-cur"],
      "must_reason_codes": []
    },
    {
      "id": "V008",
      "description": "Partial keyword with low score",
      "expected_state": "NO_MATCH",
      "expected_relation_type": "none",
      "doc_ids": ["d-part"],
      "tx_ids": ["tx-part"],
      "must_reason_codes": []
    },
    {
      "id": "V009",
      "description": "One doc, two tx sum (one_to_many final)",
      "expected_state": "FINAL_MATCH",
      "expected_relation_type": "one_to_many",
      "doc_ids": ["d-1n"],
      "tx_ids": ["tx-1n-a", "tx-1n-b"],
      "must_reason_codes": ["PARTIAL_PAYMENT_SUM"]
    },
    {
      "id": "V010",
      "description": "Amazon: one tx, three docs sum (many_to_one final)",
      "expected_state": "FINAL_MATCH",
      "expected_relation_type": "many_to_one",
      "doc_ids": ["d-amz-1", "d-amz-2", "d-amz-3"],
      "tx_ids": ["tx-amz"],
      "must_reason_codes": ["SUBSET_SUM_EXACT"]
    },
    {
      "id": "V011",
      "description": "Many to one ambiguous (two solutions)",
      "expected_state": "AMBIGUOUS",
      "expected_relation_type": "many_to_one",
      "doc_ids": [],
      "tx_ids": ["tx-amb"],
      "must_reason_codes": ["AMBIGUOUS_MULTIPLE_SOLUTIONS"]
    },
    {
      "id": "V012",
      "description": "Conflict loser after linked (second tx)",
      "expected_state": "NO_MATCH",
      "expected_relation_type": "none",
      "doc_ids": ["d-conf"],
      "tx_ids": ["tx-conf-b"],
      "must_reason_codes": []
    },
    {
      "id": "V013",
      "description": "Conflict winner (first tx)",
      "expected_state": "FINAL_MATCH",
      "expected_relation_type": "one_to_one",
      "doc_ids": ["d-conf"],
      "tx_ids": ["tx-conf-a"],
      "must_reason_codes": ["HARD_INVOICE_NO"]
    }
  ]
}
